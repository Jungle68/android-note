import{_ as t,r as n,o as i,c as a,a as e,b as c,d as o,e as r}from"./app.e2a3b496.js";const s={},u=e("h1",{id:"instantrun\u8BE6\u89E3",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#instantrun\u8BE6\u89E3","aria-hidden":"true"},"#"),o(" InstantRun\u8BE6\u89E3")],-1),l=o("\u4E4B\u524D\u5728\u5199"),p={href:"https://github.com/CharonChui/AndroidNote/blob/master/AndroidStudioCourse/AndroidStudio%E6%8F%90%E9%AB%98Build%E9%80%9F%E5%BA%A6.md",title:"AndroidStudio\u63D0\u9AD8Build\u901F\u5EA6",target:"_blank",rel:"noopener noreferrer"},h=o("AndroidStudio\u63D0\u9AD8Build\u901F\u5EA6"),m=o("]\u8FD9\u7BC7\u6587\u7AE0\u7684\u65F6\u5019\u5199\u5230\uFF0C\u60F3\u8981\u5FEB\uFF0C\u5C31\u7528"),g=e("code",null,"Instant Run",-1),_=o("\u3002\u6700\u8FD1\u6709\u670B\u53CB\u53D1\u6765\u90AE\u4EF6\u8BA8\u8BBA\u5B83\u7684\u539F\u7406\uFF0C\u6700\u8FD1\u9879\u76EE\u4E0D\u5FD9\uFF0C\u7D22\u6027\u5C31\u6765\u7CFB\u7EDF\u7684\u5B66\u4E60\u4E0B\u3002"),b=r('<p><code>Android Studio</code>2.0\u5F00\u59CB\u5F15\u5165\u4E86<code>Instant Run</code>\uFF0C\u5B83\u4E3B\u8981\u662F\u5728<code>Run</code>\u548C<code>Debug</code>\u7684\u65F6\u5019\u53EF\u4EE5\u53BB\u51CF\u5C11\u66F4\u65B0\u5E94\u7528\u7684\u65F6\u95F4\u3002\u867D\u7136\u7B2C\u4E00\u6B21<code>Build</code>\u7684\u65F6\u5019\u53EF\u80FD\u4F1A\u6D88\u8017\u7A0D\u957F\u7684\u65F6\u95F4\u6765\u5B8C\u6210\uFF0C\u4F46\u662F<code>Instant Run</code>\u53EF\u4EE5\u628A\u66F4\u65B0\u5185\u5BB9\u63A8\u9001\u5230\u8BBE\u5907\u4E0A\uFF0C\u800C\u65E0\u9700\u91CD\u65B0<code>build</code>\u4E00\u4E2A\u65B0\u7684<code>apk</code>\uFF0C\u8FD9\u6837\u5C31\u4F1A\u5F88\u5FEB\u901F\u7684\u8BA9\u6211\u4EEC\u89C2\u5BDF\u5230\u6539\u53D8\u3002</p><p><code>Instant Run</code>\u53EA\u652F\u6301\u5728<code>build.gralde</code>\u6587\u4EF6\u4E2D\u914D\u7F6E\u7684<code>Gradle</code>\u7248\u672C\u662F2.0.0\u4EE5\u4E0A\u5E76\u4E14<code>minSdkVersion</code>\u662F15\u4EE5\u4E0A\u624D\u53EF\u4EE5\u3002\u4E3A\u4E86\u80FD\u66F4\u597D\u7684\u4F7F\u7528\uFF0C\u8BF7\u5C06<code>minSdkVrsion</code>\u8BBE\u7F6E\u523021\u4EE5\u4E0A\u3002</p><p>\u90E8\u7F72\u5B8C\u5E94\u7528\u540E\uFF0C\u4F1A\u5728<code>Run</code><img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/as-irrun.png?raw=true" alt="image">(\u6216\u8005(Debug<img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/as-irdebug.png?raw=true" alt="image">))\u56FE\u6807\u4E0A\u9762\u51FA\u73B0\u4E00\u4E2A\u5C0F\u9EC4\u8272\u7684\u95EA\u7535\u7B26\u53F7\uFF0C\u8FD9\u5C31\u610F\u5473\u7740<code>Instant Run</code>\u5DF2\u7ECF\u51C6\u5907\u5C31\u7EEA\uFF0C\u5728\u4F60\u4E0B\u6B21\u70B9\u51FB\u6309\u94AE\u7684\u65F6\u5019\u53EF\u4EE5\u63A8\u9001\u66F4\u65B0\u5185\u5BB9\u3002\u5B83\u4E0D\u9700\u8981\u91CD\u65B0\u6784\u5EFA\u4E00\u4E2A\u65B0\u7684<code>APK</code>,\u5B83\u53EA\u63A8\u9001\u90A3\u4E9B\u65B0\u6539\u53D8\u7684\u5730\u65B9\uFF0C\u6709\u4E9B\u60C5\u51B5\u4E0B<code>app</code>\u90FD\u4E0D\u9700\u8981\u91CD\u542F\u5C31\u53EF\u4EE5\u76F4\u63A5\u663E\u793A\u65B0\u6539\u53D8\u7684\u4E0B\u6548\u679C\u3002</p><h3 id="\u914D\u7F6E\u4F60\u7684\u5E94\u7528\u6765\u4F7F\u7528instant-run" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u4F60\u7684\u5E94\u7528\u6765\u4F7F\u7528instant-run" aria-hidden="true">#</a> \u914D\u7F6E\u4F60\u7684\u5E94\u7528\u6765\u4F7F\u7528<code>Instant Run</code></h3><p><code>Android Stuido</code>\u4E2D\u9879\u76EE\u4F7F\u7528<code>Gralde</code>2.0.0\u53CA\u4EE5\u4E0A\u7248\u672C\u4F1A\u9ED8\u8BA4\u4F7F\u7528<code>Instant Run</code>\u3002<br> \u8BA9\u9879\u76EE\u66F4\u65B0\u5230\u6700\u65B0\u7684\u7248\u672C:</p><ol><li>\u70B9\u51FB<code>Settings</code>\u4E2D\u7684<code>Preferences</code>\u6309\u94AE\u3002</li><li>\u627E\u5230<code>Build,Execution,Deployment</code>\u4E2D\u7684<code>Instant Run</code>\u7136\u540E\u70B9\u51FB<code>Update Project</code>\uFF0C\u5982\u679C<code>Update Project</code>\u90E8\u5206\u6CA1\u6709\u663E\u793A\uFF0C\u90A3\u8BF4\u660E\u4F60\u5F53\u524D\u5DF2\u7ECF\u662F\u6700\u65B0\u7248\u672C\u4E86.<br><img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/update-project-dialog.png?raw=true" alt="image"></li></ol><h3 id="\u4FEE\u590D\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#\u4FEE\u590D\u7C7B\u578B" aria-hidden="true">#</a> \u4FEE\u590D\u7C7B\u578B</h3><p><code>Instant Run</code>\u901A\u8FC7\u70ED\u4FEE\u590D\u3001\u6696\u4FEE\u590D\u6216\u8005\u51B7\u4FEE\u590D\u6765\u63A8\u9001\u6539\u53D8\u7684\u4EE3\u7801\u548C\u8D44\u6E90\u5230\u4F60\u7684\u8BBE\u5907\u6216\u8005\u6A21\u62DF\u5668\u4E0A\u3002\u5B83\u4F1A\u6839\u636E\u4F60\u66F4\u6539\u7684\u5185\u5BB9\u6765\u81EA\u52A8\u9009\u62E9\u5BF9\u5E94\u7684\u4FEE\u590D\u7C7B\u578B\u3002</p><ul><li>\u70ED\u4FEE\u590D: \u66F4\u6539\u7684\u5185\u5BB9\u4E0D\u9700\u8981\u91CD\u542F\u5E94\u7528\u751A\u81F3\u4E0D\u9700\u8981\u91CD\u542F\u5F53\u524D\u7684<code>activity</code>\u5C31\u53EF\u4EE5\u8BA9\u663E\u793A\u5185\u5BB9\u7684\u6539\u53D8\uFF0C\u5BF9\u4E8E\u5927\u90E8\u5206\u901A\u8FC7\u65B9\u6CD5\u5185\u5BB9\u6539\u53D8\u7684\u66F4\u6539\u90FD\u53EF\u4EE5\u901A\u8FC7\u8FD9\u79CD\u65B9\u5F0F\u6765\u4FEE\u6539\u3002</li><li>\u6696\u4FEE\u590D: \u9700\u8981\u91CD\u542F<code>activity</code>\u624D\u80FD\u8BA9\u6539\u53D8\u751F\u6548\uFF0C\u5728\u6539\u53D8\u8D44\u6E90\u65F6\u4F1A\u901A\u8FC7\u8BE5\u65B9\u5F0F\u3002</li><li>\u51B7\u4FEE\u590D: \u5E94\u7528\u9700\u8981\u91CD\u542F(\u4E0D\u662F\u91CD\u65B0\u5B89\u88C5)\u3002\u5BF9\u4E8E\u4E00\u4E9B\u65B9\u6CD5\u65B9\u6CD5\u7ED3\u6784\u548C\u5B9E\u73B0\u7B49\u7ED3\u6784\u6027\u7684\u6539\u53D8\u9700\u8981\u901A\u8FC7\u8BE5\u65B9\u5F0F\u3002</li></ul><p>\u90A3\u5177\u4F53\u66F4\u6539\u5185\u5BB9\u548C\u4FEE\u590D\u65B9\u5F0F\u662F\u600E\u4E48\u5BF9\u5E94\u7684\u5462\uFF1F</p><ul><li><p>\u6539\u53D8\u73B0\u5728\u5DF2\u7ECF\u5B58\u5728\u7684\u65B9\u6CD5<br> \u8FD9\u5C06\u901A\u8FC7<em><strong>\u70ED\u4FEE\u590D</strong></em>\u6765\u6267\u884C\uFF0C\u8FD9\u662F\u6700\u5FEB\u7684\u4E00\u79CD\u4FEE\u590D\u65B9\u5F0F\u3002\u4F60\u7684\u5E94\u7528\u4F1A\u5728\u8FD0\u884C\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u5728\u4E0B\u6B21\u8C03\u7528\u8BE5\u65B9\u6CD5\u65F6\u76F4\u63A5\u4F7F\u7528\u65B0\u5B9E\u73B0\u7684\u65B9\u6CD5\u3002 \u70ED\u4FEE\u590D\u4E0D\u9700\u8981\u91CD\u65B0\u521D\u59CB\u5316\u5BF9\u8C61\u3002\u5728\u770B\u5230\u5177\u4F53\u7684\u66F4\u6539\u4E4B\u524D\uFF0C\u4F60\u53EF\u80FD\u4F1A\u9700\u8981\u91CD\u542F\u5F53\u524D\u7684<code>activity</code>\u6216\u8005\u5E94\u7528\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B<code>Android Studio</code>\u5728\u6267\u884C\u70ED\u4FEE\u590D\u540E\u4F1A\u81EA\u52A8\u91CD\u542F\u5F53\u524D\u7684<code>activity</code>\u3002\u5982\u679C\u4F60\u4E0D\u60F3\u8981\u5B83\u81EA\u52A8\u91CD\u542F<code>activity</code>\u4F60\u4E5F\u53EF\u4EE5\u5728\u8BBE\u7F6E\u4E2D\u7981\u7528\u3002</p></li><li><p>\u66F4\u6539\u6216\u8005\u79FB\u9664\u5DF2\u7ECF\u5B58\u5728\u7684\u8D44\u6E90<br> \u8FD9\u5C06\u901A\u8FC7<em><strong>\u6696\u4FEE\u590D</strong></em>\u6765\u6267\u884C:\u8FD9\u4E5F\u662F\u975E\u5E38\u5FEB\u7684\uFF0C\u4F46\u662F<code>Instant Run</code>\u5728\u63A8\u9001\u8FD9\u4E9B\u66F4\u65B0\u5185\u5BB9\u65F6\u5FC5\u987B\u8981\u91CD\u542F\u5F53\u524D\u7684<code>activity</code>\u3002\u4F60\u7684\u5E94\u7528\u4ECD\u7136\u4F1A\u7EE7\u7EED\u8FD0\u884C\uFF0C\u4F46\u662F\u5728\u91CD\u542F<code>activity</code>\u65F6\u5C4F\u5E55\u53EF\u80FD\u4F1A\u95EA\u52A8-\u8FD9\u662F\u6B63\u5E38\u6EF4\u3002</p></li><li><p>\u7ED3\u6784\u6027\u7684\u6539\u53D8\u4F8B\u5982:</p><ul><li><p>\u589E\u5220\u6216\u8005\u6539\u53D8:</p><ul><li>\u4E00\u4E2A\u6CE8\u89E3</li><li>\u4E00\u4E2A\u53D8\u91CF</li><li>\u4E00\u4E2A\u9759\u6001\u53D8\u91CF</li><li>\u4E00\u4E2A\u65B9\u6CD5\u7ED3\u6784</li><li>\u4E00\u4E2A\u9759\u6001\u65B9\u6CD5\u7ED3\u6784</li></ul></li><li><p>\u66F4\u6539\u8BE5\u7C7B\u96C6\u6210\u7684\u7236\u7C7B</p></li><li><p>\u66F4\u6539\u63A5\u53E3\u7684\u5B9E\u73B0\u5217\u8868</p></li><li><p>\u66F4\u6539\u7C7B\u7684\u9759\u6001\u4FEE\u9970\u7B26</p></li><li><p>\u4F7F\u7528\u52A8\u6001\u8D44\u6E90<code>id</code>\u91CD\u65B0\u5E03\u5C40</p></li></ul><p>\u4E0A\u9762\u7684\u8FD9\u4E9B\u6539\u53D8\u90FD\u5C06\u901A\u8FC7***\u51B7\u4FEE\u590D(API 21\u4EE5\u4E0A\u624D\u652F\u6301)***\u6765\u6267\u884C.\u51B7\u4FEE\u590D\u4F1A\u7A0D\u5FAE\u6709\u4E9B\u6162\uFF0C\u56E0\u4E3A\u867D\u7136\u4E0D\u9700\u8981\u6784\u5EFA\u4E00\u4E2A\u65B0\u7684<code>APK</code>\u4F46\u662F\u5FC5\u987B\u8981\u91CD\u542F\u6574\u4E2A<code>app</code>\u624D\u80FD\u63A8\u9001\u8FD9\u4E9B\u7ED3\u6784\u6027\u7684\u4EE3\u7801\u6539\u53D8\u3002\u5BF9\u4E8E<code>API</code> 20\u53CA\u4EE5\u4E0B\u7684\u7248\u672C\uFF0C<code>Android Studio</code>\u5C06\u91CD\u65B0\u90E8\u7F72<code>APK</code>\u3002</p></li><li><p>\u66F4\u6539<code>manifest</code>\u6587\u4EF6\u6216\u8005\u66F4\u6539<code>manifest</code>\u6587\u4EF6\u4E2D\u5F15\u7528\u7684\u8D44\u6E90\u6216\u8005\u66F4\u6539<code>Android</code>\u684C\u9762<code>widget</code>\u7684<code>UI</code>\u5B9E\u73B0(\u9700\u8981Clean and Rerun)<br> \u5728\u66F4\u6539\u6E05\u5355\u6587\u4EF6\u6216\u8005\u6E05\u5355\u6587\u4EF6\u4E2D\u5F15\u7528\u7684\u8D44\u6E90\u65F6\uFF0C<code>Android Studio</code>\u4F1A\u81EA\u52A8\u7684\u91CD\u65B0\u90E8\u7F72\u5F15\u7528\u6765\u5B9E\u73B0\u8FD9\u4E9B\u5185\u5BB9\u7684\u6539\u53D8\u3002\u8FD9\u662F\u56E0\u4E3A\u4F8B\u5982\u5E94\u7528\u540D\u79F0\u3001\u56FE\u6807\u548C<code>intent filters</code>\u8FD9\u4E9B\u4E1C\u897F\u662F\u8981\u5728\u5E94\u7528\u5B89\u88C5\u5230\u8BBE\u5907\u65F6\u6839\u636E\u6E05\u5355\u6587\u4EF6\u6765\u51B3\u5B9A\u7684\u3002 \u5728\u66F4\u65B0<code>Android UI widget</code>\u65F6\uFF0C\u4F60\u9700\u8981\u6267\u884C<code>Clean and Rerun</code>\u624D\u80FD\u770B\u5230\u66F4\u6539\u7684\u5185\u5BB9\uFF0C\u56E0\u4E3A\u5728\u4F7F\u7528<code>Instant Run</code>\u65F6\u6267\u884C<code>clean</code>\u4F1A\u9700\u8981\u5F88\u957F\u7684\u65F6\u95F4\uFF0C\u6240\u4EE5\u4F60\u5728\u66F4\u65B0<code>UI widget</code>\u65F6\u53EF\u4EE5\u7981\u7528<code>Instant Run</code>\u3002</p></li></ul><h5 id="\u4F7F\u7528rerun" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528rerun" aria-hidden="true">#</a> \u4F7F\u7528Rerun</h5><p>\u5982\u679C\u4FEE\u6539\u4E86\u4E00\u4E9B\u4F1A\u5F71\u54CD\u5230\u521D\u59CB\u5316\u7684\u5185\u5BB9\u65F6\uFF0C\u4F8B\u5982\u4FEE\u6539\u4E86\u5E94\u7528\u7684<code>onCreate()</code>\u65B9\u6CD5\uFF0C\u4F60\u9700\u8981\u91CD\u542F\u4F60\u7684\u5E94\u7528\u6765\u8BA9\u8FD9\u4E9B\u6539\u53D8\u751F\u6548\uFF0C\u4F60\u53EF\u4EE5\u70B9\u51FB<code>Rerun</code>\u56FE\u6807\u3002\u5B83\u5C06\u4F1A\u505C\u6B62\u5E94\u7528\u8FD0\u884C\uFF0C\u5E76\u4E14\u6267\u884C<code>clean</code>\u64CD\u4F5C\u540E\u91CD\u65B0\u90E8\u7F72\u4E00\u4E2A\u65B0\u7684<code>APK</code>\u5230\u4F60\u7684\u8BBE\u5907\u3002</p><h3 id="\u5B9E\u73B0\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u73B0\u539F\u7406" aria-hidden="true">#</a> \u5B9E\u73B0\u539F\u7406</h3><p>\u6B63\u5E38\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u4FEE\u6539\u4E86\u5185\u5BB9\uFF0C\u60F3\u8BA9\u8BA9\u5B83\u751F\u6548\uFF0C\u90A3\u5C31\u9700\u8981\u5982\u4E0B\u7684\u6B65\u9AA4:</p><p><img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/change_run_list.png?raw=true" alt="image"></p><p>\u90A3<code>Instant Run</code>\u7684\u76EE\u6807\u4E5F\u975E\u5E38\u7B80\u5355:</p><blockquote><p>\u5C3D\u53EF\u80FD\u591A\u7684\u79FB\u9664\u4E0A\u9762\u7684\u6B65\u9AA4\uFF0C\u6765\u8BA9\u5269\u4E0B\u7684\u90E8\u5206\u5C3D\u53EF\u80FD\u66F4\u5FEB\u3002</p></blockquote><p>\u8FD9\u5C31\u610F\u5473\u7740:</p><ul><li>\u53EA\u6784\u5EFA\u548C\u90E8\u7F72\u65B0\u66F4\u6539\u7684\u90E8\u5206\u3002</li><li>\u4E0D\u53BB\u91CD\u65B0\u5B89\u88C5\u5E94\u7528\u3002</li><li>\u4E0D\u53BB\u91CD\u542F\u5E94\u7528\u3002</li><li>\u751A\u81F3\u4E0D\u53BB\u91CD\u542F<code>activity</code>\u3002</li></ul><p><img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/instant_run_list.png?raw=true" alt="image"></p><p>\u666E\u901A\u60C5\u51B5\u4E0B\u5728\u4F60\u70B9\u51FB<code>Run</code>\u6216\u8005<code>Debug</code>\u6309\u94AE\u65F6\uFF0C\u4F1A\u6267\u884C\u5982\u4E0B\u7684\u64CD\u4F5C:<br><img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/apk_progress.png?raw=true" alt="image"></p><p>\u6E05\u5355\u6587\u4EF6\u4F1A\u88AB\u6574\u5408\u7136\u540E\u4E0E\u4F60\u5E94\u7528\u7684\u8D44\u6E90\u91CD\u542F\u6253\u5305\u6210<code>APK</code>.\u540C\u6837\u7684\uFF0C<code>.java</code>\u7684\u6E90\u4EE3\u7801\u4F1A\u88AB\u7F16\u8BD1\u6210\u4E8C\u8FDB\u5236\uFF0C\u7136\u540E\u8F6C\u6362\u6210<code>.dex</code>\u6587\u4EF6\uFF0C\u4ED6\u4EEC\u4E5F\u4F1A\u88AB\u5305\u542B\u5230<code>APK</code>\u4E2D\u3002</p><p>\u5728\u4F7F\u7528<code>Instant Run</code>\u7684\u60C5\u51B5\u4E0B\uFF0C\u7B2C\u4E00\u6B21\u70B9\u51FB<code>Run</code>\u548C<code>Debug</code>\u65F6<code>Gradle</code>\u4F1A\u6267\u884C\u4E00\u4E9B\u989D\u5916\u7684\u64CD\u4F5C:<br><img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/instant_apk_progress.png?raw=true" alt="image"><code>instrumentation</code>\u76F8\u5173\u7684\u4E8C\u8FDB\u5236\u5185\u5BB9\u4F1A\u88AB\u589E\u52A0\u5230<code>.class</code>\u6587\u4EF6\u4E2D\uFF0C\u5E76\u4E14\u4E00\u4E2A\u65B0\u7684<code>App Server</code>\u7C7B\u4F1A\u88AB\u6CE8\u5165\u5230\u5E94\u7528\u4E2D\u3002<br> \u540C\u65F6\u4E5F\u4F1A\u589E\u52A0\u4E00\u4E2A\u65B0\u7684<code>Application</code>\u7C7B\uFF0C\u6765\u6CE8\u5165\u4E00\u4E9B\u81EA\u5B9A\u4E49\u7684<code>class loader</code>\u5E76\u4E14\u80FD\u542F\u52A8<code>App Server</code>\u3002\u56E0\u6B64<code>minifest</code>\u6587\u4EF6\u4F1A\u88AB\u4FEE\u6539\u6765\u4FDD\u8BC1\u4F7F\u7528\u8BE5\u65B0\u52A0\u7684<code>Application</code>\u7C7B(\u5982\u679C\u4F60\u5DF2\u7ECF\u521B\u5EFA\u4E86\u81EA\u5DF1\u7684<code>Application</code>\u7C7B\uFF0C<code>Instant Run</code>\u7684\u7248\u672C\u5C06\u4F1A\u7528\u4F60\u5B9A\u4E49\u7684\u6765\u8FDB\u884C\u4EE3\u7406\u6269\u5C55)</p><p>\u7ECF\u8FC7\u4E0A\u9762\u7684\u64CD\u4F5C<code>Instant Run</code>\u5C31\u5F00\u59CB\u6267\u884C\u4E86\uFF0C\u4EE5\u540E\u5982\u679C\u4F60\u6539\u53D8\u4E86\u4EE3\u7801\u90E8\u5206\uFF0C\u5728\u91CD\u65B0\u70B9\u51FB<code>Run</code>\u6216\u8005<code>Debug</code>\u65F6\uFF0C<code>Instant Run</code>\u5C06\u4F1A\u901A\u8FC7\u70ED\u3001\u6696\u3001\u51B7\u4FEE\u590D\u6765\u5C3D\u53EF\u80FD\u7684\u51CF\u5C11\u4E0A\u9762\u7684\u6784\u5EFA\u8FC7\u7A0B\u3002</p><p>\u5728<code>Instant Run</code>\u66F4\u6539\u5185\u5BB9\u524D\uFF0C<code>Android Studio</code>\u4F1A\u4F60\u7684\u5E94\u7528\u7248\u672C\u662F\u5426\u652F\u6301<code>Instant Run</code>\u5E76\u4E14<code>App Server</code>\u662F\u5426\u8FD0\u884C\u5728\u5BF9\u5176\u6709\u7528\u7684\u7AEF\u53E3(\u5185\u90E8\u4F7F\u7528\u4E86Socket)\u3002 \u8FD9\u6837\u6765\u786E\u5B9A\u4F60\u7684\u5E94\u7528\u662F\u5426\u5728\u524D\u53F0\u8FD0\u884C\uFF0C\u5E76\u4E14\u627E\u5230<code>Studio</code>\u6240\u9700\u8981\u7684\u6784\u5EFA<code>ID</code>.</p><p>\u603B\u7ED3\u4E00\u4E0B\uFF0C\u5176\u5B9E\u5C31\u662F\u5185\u90E8\u4F1A\u5BF9\u6BCF\u4E2A<code>class</code>\u6587\u4EF6\u6CE8\u5165<code>instant run</code>\u76F8\u5173\u7684\u4EE3\u7801\uFF0C\u7136\u540E\u81EA\u5B9A\u4E49\u4E00\u4E2A<code>application</code>\u5185\u90E8\u6307\u5B9A\u81EA\u5B9A\u4E49\u7684<code>classLoader</code>(\u4E5F\u5C31\u662F\u8BF4\u4E0D\u4F7F\u7528\u9ED8\u8BA4\u7684<code>classLoader</code>\u4E86\uFF0C\u53EA\u8981\u7528\u4E86<code>Instant Run</code>\u5C31\u9700\u8981\u4F7F\u7528\u5B83\u81EA\u5B9A\u4E49\u7684<code>classLoader</code>)\uFF0C\u7136\u540E\u5728\u5E94\u7528\u7A0B\u5E8F\u91CC\u9762\u5F00\u542F\u4E00\u4E2A\u670D\u52A1\u5668\uFF0C<code>Studio</code>\u5C06\u4FEE\u6539\u7684\u4EE3\u7801\u53D1\u9001\u5230\u8BE5\u670D\u52A1\u5668\uFF0C\u7136\u540E\u518D\u901A\u8FC7\u81EA\u5B9A\u4E49\u7684<code>classLoader</code>\u52A0\u8F7D\u4EE3\u7801\u7684\u65F6\u5019\u4F1A\u53BB\u8BF7\u6C42\u8BE5\u670D\u52A1\u5668\u5224\u65AD\u4EE3\u7801\u662F\u5426\u6709\u66F4\u65B0\uFF0C\u5982\u679C\u6709\u66F4\u65B0\u5C31\u4F1A\u901A\u8FC7\u59D4\u6258\u673A\u5236\u52A0\u8F7D\u65B0\u66F4\u65B0\u7684\u4EE3\u7801\u7136\u540E\u6CE8\u5165\u5230\u5E94\u7528\u7A0B\u5E8F\u4E2D\uFF0C\u8FD9\u6837\u5C31\u5B8C\u6210\u4E86\u66FF\u6362\u7684\u64CD\u4F5C\u3002</p><h3 id="\u70ED\u4FEE\u590D\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u70ED\u4FEE\u590D\u8FC7\u7A0B" aria-hidden="true">#</a> \u70ED\u4FEE\u590D\u8FC7\u7A0B</h3><p><img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/hot_swapping.png?raw=true" alt="image"></p><p><code>Android Studio</code>\u4F1A\u76D1\u542C\u5728\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u54EA\u4E2A\u6587\u4EF6\u53D1\u751F\u4E86\u6539\u53D8\uFF0C\u5E76\u4E14\u901A\u8FC7\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7684<code>Gralde task</code>\u6765\u53EA\u5BF9\u4FEE\u6539\u7684<code>class</code>\u6587\u4EF6\u751F\u6210\u5BF9\u5E94\u7684<code>.dex</code>\u6587\u4EF6\u3002<br> \u8FD9\u4E9B\u65B0\u7684<code>.dex</code>\u6587\u4EF6\u4F1A\u901A\u8FC7<code>Studio</code>\u4F20\u9012\u53D1\u5E03\u7ED9\u5E94\u7528\u4E2D\u8FD0\u884C\u7684<code>App Server</code>\u3002</p><p>\u56E0\u4E3A\u5F00\u59CB\u65F6\u8FD9\u4E9B\u6587\u4EF6\u7684<code>class</code>\u5DF2\u7ECF\u5B58\u5728\u5230\u8FD0\u884C\u4E2D\u7684\u5E94\u7528\u4E2D-<code>Gralde</code>\u9700\u8981\u4FDD\u8BC1\u66F4\u65B0\u7684\u7248\u672C\u6765\u4FDD\u8BC1\u4ED6\u4EEC\u80FD\u8986\u76D6\u4E4B\u524D\u5DF2\u7ECF\u5B58\u5728\u7684\u6587\u4EF6\u3002\u8FD9\u4E9B\u66F4\u65B0\u6587\u4EF6\u7684\u8F6C\u6362\u662F\u7531<code>App Server</code>\u901A\u8FC7\u81EA\u5B9A\u4E49\u7684<code>class loader</code>\u6765\u5B8C\u6210\u7684\u3002</p><p>\u4ECE\u73B0\u5728\u5F00\u59CB\uFF0C\u6BCF\u6B21\u4E00\u4E2A\u65B9\u6CD5\u88AB\u8C03\u7528\u65F6(\u4E0D\u7BA1\u5728\u5E94\u7528\u4E2D\u7684\u4EFB\u4F55\u5730\u65B9)\uFF0C\u88AB\u6CE8\u5165\u5230\u6700\u521D\u7684<code>class</code>\u6587\u4EF6\u4E2D\u7684<code>instrumentation</code>\u90FD\u8BB2\u53BB\u8FDE\u63A5<code>App Server</code>\u6765\u68C0\u67E5\u5B83\u4EEC\u662F\u5426\u6709\u66F4\u65B0\u4E86\u3002 \u5982\u679C\u6709\u66F4\u65B0\uFF0C\u6267\u884C\u64CD\u4F5C\u5C06\u88AB\u6307\u6D3E\u5230\u65B0\u7684\u5145\u5728\u7684<code>class</code>\u6587\u4EF6\uFF0C\u8FD9\u6837\u5C31\u4F1A\u6267\u884C\u65B0\u4FEE\u6539\u7684\u65B9\u6CD5\u3002</p><p><img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/instant_run_app_server.png?raw=true" alt="image"></p><p>\u5982\u679C\u4F60\u8BBE\u7F6E\u65AD\u70B9\uFF0C\u4F60\u4F1A\u53D1\u73B0\u4F60\u8C03\u7528\u7684\u662F<code>override</code>\u540D\u5B57\u7684\u7C7B\u4E2D\u7684\u65B9\u6CD5\u3002 <img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/instant_debug_override.gif?raw=true" alt="image"></p><p>\u8FD9\u79CD\u91CD\u65B0\u6307\u5B9A\u65B9\u6CD5\u7684\u65B9\u5F0F\u5728\u6539\u53D8\u65B9\u6CD5\u5B9E\u73B0\u65F6\u975E\u5E38\u6709\u6548\uFF0C\u4F46\u662F\u5BF9\u4E8E\u90A3\u79CD\u9700\u8981\u5728<code>Activity</code>\u542F\u52A8\u65F6\u52A0\u8F7D\u7684\u6539\u53D8\u5462\uFF1F</p><h3 id="\u6696\u4FEE\u590D" tabindex="-1"><a class="header-anchor" href="#\u6696\u4FEE\u590D" aria-hidden="true">#</a> \u6696\u4FEE\u590D</h3><p>\u6696\u4FEE\u590D\u4F1A\u91CD\u542F<code>Activity</code>\u3002\u8D44\u6E90\u6587\u4EF6\u4F1A\u5728<code>Activity</code>\u542F\u52A8\u65F6\u88AB\u52A0\u8F7D\uFF0C\u6240\u4EE5\u4FEE\u6539\u5B83\u4EEC\u9700\u8981<code>activity</code>\u91CD\u65B0\u542F\u52A8\u6765\u8FDB\u884C\u52A0\u8F7D\u3002</p><p>\u73B0\u5728\uFF0C\u66F4\u6539\u4EFB\u4F55\u8D44\u6E90\u90FD\u4F1A\u5BFC\u81F4\u6240\u6709\u7684\u8D44\u6E90\u90FD\u88AB\u91CD\u65B0\u6253\u5305\u75C5\u8F6C\u79FB\u5230\u5E94\u7528\u4E2D-\u4F46\u662F\u4EE5\u540E\u4F1A\u652F\u6301\u589E\u91CF\u5305\u7684\u529F\u80FD\u6765\u8BA9\u53EA\u6253\u5305\u548C\u90E8\u7F72\u90A3\u4E9B\u65B0\u4FEE\u6539\u7684\u8D44\u6E90\u3002</p><blockquote><p>\u6CE8\u610F\uFF0C\u6696\u4FEE\u590D\u5728\u66F4\u6539<code>manifest</code>\u4EF6\u6216\u8005<code>manifest</code>\u6587\u4EF6\u4E2D\u5F15\u7528\u7684\u5185\u5BB9\u65F6\u65E0\u6548\uFF0C\u56E0\u4E3A<code>manifest</code>\u6587\u4EF6\u4E2D\u7684\u5185\u5BB9\u9700\u8981\u5728<code>apk</code>\u5B89\u88C5\u65F6\u8BFB\u53D6\u3002\u66F4\u6539<code>Manifest</code>\u6587\u4EF6(\u6216\u8005\u5B83\u6240\u5F15\u7528\u7684\u5185\u5BB9)\u9700\u8981\u88AB\u5168\u90E8\u6784\u5EFA\u548C\u90E8\u7F72\u3002</p></blockquote><p>\u975E\u5E38\u4E0D\u5E78\u7684\u662F\uFF0C\u91CD\u542F<code>activity</code>\u5728\u505A\u4E00\u4E9B\u7ED3\u6784\u6027\u7684\u6539\u53D8\u65F6\u65E0\u6548\u3002\u5BF9\u4E8E\u8FD9\u4E9B\u6539\u53D8\u9700\u8981\u4F7F\u7528\u51B7\u4FEE\u590D\u3002</p><h3 id="\u51B7\u4FEE\u590D" tabindex="-1"><a class="header-anchor" href="#\u51B7\u4FEE\u590D" aria-hidden="true">#</a> \u51B7\u4FEE\u590D</h3><p>\u5728\u90E8\u7F72\u65F6\uFF0C\u4F60\u7684\u5E94\u7528\u548C\u4ED6\u7684\u5B50\u9879\u76EE\u4F1A\u88AB\u5206\u6D3E\u523010\u4E2A\u4E0D\u540C\u7684\u90E8\u5206\uFF0C\u6BCF\u4E2A\u90FD\u5728\u81EA\u5DF1\u5355\u72EC\u7684<code>dex</code>\u6587\u4EF6\u3002\u4E0D\u540C\u90E8\u5206\u7684\u7C7B\u4F1A\u901A\u8FC7\u5305\u540D\u6765\u5206\u914D\u3002\u5728\u4F7F\u7528\u51B7\u4FEE\u590D\u65F6\uFF0C\u4FEE\u6539\u7684\u7C7B\u9700\u8981\u5176\u4ED6\u6240\u6709\u76F8\u5173\u7684<code>class</code>\u6587\u4EF6\u90FD\u88AB\u91CD\u65B0\u6253\u5305\u540E\u624D\u80FD\u88AB\u90E8\u7F72\u5230\u8BBE\u5907\u4E0A\u3002<br> \u8FD9\u5C31\u9700\u8981\u4F9D\u8D56<code>Android Runtime</code>\u80FD\u652F\u6301\u52A0\u8F7D\u591A\u4E2A<code>.dex</code>\u6587\u4EF6,\u8FD9\u662F\u4E00\u4E2A\u5728<code>ART</code>\u4E2D\u65B0\u589E\u7684\u529F\u80FD\uFF0C\u5B83\u53EA\u6709\u5728<code>Android 5.0(API 21)</code>\u4EE5\u4E0A\u7684\u8BBE\u5907\u603B\u624D\u652F\u6301\u3002<br> \u5BF9\u4E8E<code>API 20</code>\u4E00\u4E0B\u7684\u8BBE\u5907\uFF0C\u4ED6\u4EEC\u4ECD\u5728\u4F7F\u7528<code>Dalvik</code>\u865A\u62DF\u673A\uFF0C<code>Android Studio</code>\u9700\u8981\u90E8\u7F72\u6574\u4E2A<code>APK</code>\u3002</p><p>\u6709\u4E9B\u65F6\u5019\u901A\u8FC7\u70ED\u4FEE\u590D\u6765\u6539\u53D8\u7684\u4EE3\u7801\uFF0C\u4F46\u662F\u5B83\u4F1A\u88AB\u5E94\u7528\u9996\u6B21\u8FD0\u884C\u65F6\u7684\u521D\u59CB\u5316\u6240\u5F71\u54CD\uFF0C\u8FD9\u65F6\u4F60\u5C31\u9700\u8981<code>restart</code>\u4F60\u7684\u5E94\u7528\u6765\u8BA9\u5176\u751F\u6548(\u5FEB\u6377\u952E\u662FCommand + Ctrl + R)\u3002<br><img src="https://raw.githubusercontent.com/CharonChui/Pictures/master/instant_run_restart.gif?raw=true" alt="image"></p><h3 id="instant-run\u4F7F\u7528\u6280\u5DE7\u53CA\u63D0\u793A" tabindex="-1"><a class="header-anchor" href="#instant-run\u4F7F\u7528\u6280\u5DE7\u53CA\u63D0\u793A" aria-hidden="true">#</a> Instant Run\u4F7F\u7528\u6280\u5DE7\u53CA\u63D0\u793A</h3><p><code>Instant Run</code>\u662F\u7531<code>Android Studio</code>\u63A7\u5236\u7684\uFF0C\u6240\u4EE5\u4F60\u53EA\u80FD\u901A\u8FC7<code>IDE</code>\u6765<code>start/restart</code>\u4F60\u7684<code>debug</code>\u5B9E\u4F8B\uFF0C\u4E0D\u8981\u76F4\u63A5\u5728\u8BBE\u5907\u4E2D<code>start/restart</code>\u4F60\u7684\u5E94\u7528\uFF0C\u4E0D\u7136\u7684\u8BDD\u5C31\u4F1A\u53D1\u751F\u9519\u4E71\u3002</p><h5 id="instant-run\u9650\u5236\u6761\u4EF6" tabindex="-1"><a class="header-anchor" href="#instant-run\u9650\u5236\u6761\u4EF6" aria-hidden="true">#</a> Instant Run\u9650\u5236\u6761\u4EF6</h5><ul><li><p>\u90E8\u7F72\u5230\u591A\u4E2A\u8BBE\u5907</p><p><code>Instant Run</code>\u9488\u5BF9\u8BBE\u5907\u7684\u4E0D\u540C<code>API Level</code>\u4F7F\u7528\u4E0D\u540C\u7684\u6280\u672F\u6765\u8FDB\u884C\u70ED\u3001\u6696\u3001\u51B7\u4FEE\u590D\u3002\u56E0\u6B64\uFF0C\u5982\u679C\u540C\u65F6\u90E8\u7F72\u4E00\u4E2A\u5E94\u7528\u5230\u591A\u4E2A\u8BBE\u5907\u65F6\uFF0C<code>Studio</code>\u4F1A\u6682\u65F6\u5173\u95ED<code>Instant Run</code>\u529F\u80FD\u3002</p></li><li><p>Multidex</p><p>\u5982\u679C\u4F60\u7684\u9879\u76EE\u652F\u6301\u4F20\u7EDF\u7684<code>Multidex</code>-\u4E5F\u5C31\u662F\u5728<code>build.gradle</code>\u4E2D\u914D\u7F6E\u4E86<code>multiDexEnabled true</code>\u548C<code>minSdkVersion 20</code>\u53CA\u4EE5\u4E0B-\u5F53\u4F60\u90E8\u7F72\u5E94\u7528\u5230<code>4.4</code>\u4EE5\u4E0B\u7684\u8BBE\u5907\u4E0A\u65F6\uFF0C<code>Android Studio</code>\u5C06\u4F1A\u7981\u7528<code>Instant Run</code>\u3002</p><p>\u5982\u679C<code>minSdkVersion</code>\u8BBE\u7F6E\u4E3A21\u6216\u8005\u66F4\u9AD8\u65F6\uFF0C<code>Instant Run</code>\u5C06\u81EA\u52A8\u914D\u7F6E\u6765\u652F\u6301<code>multidex</code>\uFF0C\u56E0\u4E3A<code>Instant Run</code>\u53EA\u652F\u6301<code>debug</code>\u7248\u672C\uFF0C\u6709\u9700\u8981\u5728\u53D1\u5E03<code>release</code>\u7248\u7684\u65F6\u5019\u914D\u7F6E\u4F60\u7684<code>build</code>\u53D8\u91CF\u6765\u652F\u6301<code>multidex</code>\u3002</p></li><li><p>\u4F7F\u7528\u7B2C\u4E09\u65B9\u63D2\u4EF6 <code>Android Studio</code>\u5728\u4F7F\u7528<code>Instant Run</code>\u65F6\u4F1A\u6682\u65F6\u7981\u7528<code>Java Code Coverage Library</code>\u548C<code>ProGuard</code>\u3002\u56E0\u4E3A<code>Instant Run</code>\u53EA\u652F\u6301<code>debug</code>\u7248\u672C\uFF0C\u8FD9\u6837\u4E5F\u4E0D\u4F1A\u5F71\u54CD<code>release</code>\u7248\u7684\u6784\u5EFA\u3002</p></li><li><p>\u53EA\u80FD\u5728\u4E3B\u8FDB\u7A0B\u4E2D\u8FD0\u884C<br> \u76EE\u524D\u70ED\u4FEE\u590D\u53EA\u80FD\u5728\u4E3B\u8FDB\u7A0B\u4E2D\u8FDB\u884C\uFF0C\u5982\u679C\u5728\u5176\u4ED6\u8FDB\u7A0B\u4E2D\u70ED\u3001\u6696\u4FEE\u590D\u5C06\u65E0\u6CD5\u4F7F\u7528\uFF0C\u53EA\u80FD\u7528\u51B7\u4FEE\u590D\u6765\u66FF\u4EE3\u3002</p></li></ul><p>\u53C2\u8003:</p>',48),A={href:"https://developer.android.com/studio/run/index.html#instant-run",target:"_blank",rel:"noopener noreferrer"},I=o("\u5B98\u7F51"),R={href:"https://medium.com/google-developers/instant-run-how-does-it-work-294a1633367f#.8xmpk8xvc",target:"_blank",rel:"noopener noreferrer"},f=o("Instant Run: How Does it Work?!"),v=e("hr",null,null,-1),C=e("ul",null,[e("li",null,"\u90AE\u7BB1 \uFF1Acharon.chui@gmail.com"),e("li",null,"Good Luck!")],-1);function S(x,w){const d=n("ExternalLinkIcon");return i(),a("div",null,[u,e("p",null,[l,e("a",p,[h,c(d)]),m,g,_]),b,e("ul",null,[e("li",null,[e("a",A,[I,c(d)])]),e("li",null,[e("a",R,[f,c(d)])])]),v,C])}var k=t(s,[["render",S],["__file","InstantRun\u8BE6\u89E3.html.vue"]]);export{k as default};
