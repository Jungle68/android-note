import{_ as n,o as a,c as s,e as p}from"./app.e2a3b496.js";const o={},t=p(`<h1 id="popupwindow\u7EC6\u8282" tabindex="-1"><a class="header-anchor" href="#popupwindow\u7EC6\u8282" aria-hidden="true">#</a> PopupWindow\u7EC6\u8282</h1><h2 id="\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#\u7B80\u4ECB" aria-hidden="true">#</a> \u7B80\u4ECB</h2><p><code>A popup window that can be used to display an arbitrary view. The popup windows is a floating container that appears on top of the current activity.</code></p><ol><li><p>\u663E\u793A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">View</span> contentView <span class="token operator">=</span> <span class="token class-name">View</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>popup_appmanger<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">//\u8FD9\u91CC\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u662F\u6307\u5B9A\u662F\u5426\u80FD\u591F\u83B7\u53D6\u7126\u70B9\uFF0C\u5982\u679C\u4E3Afalse\u90A3\u4E48\u70B9\u51FB\u5F39\u51FA\u6765\u4E4B\u540E\u5C31\u4E0D\u6D88\u5931\u4E86\uFF0C\u4F46\u662F\u8BBE\u7F6E\u4E3Atrue\u4E4B\u540E\u70B9\u51FB\u4E00\u4E2A\u6761\u76EE\u5B83\u5F39\u51FA\u6765\u4E86\uFF0C</span>
\u518D\u70B9\u51FB\u522B\u7684\u6761\u76EE\u7684\u65F6\u5019\u8FD9\u4E2ApopupWindow\u7A97\u53E3\u6CA1\u6709\u7126\u70B9\u4E86\u5C31\u81EA\u5DF1\u6D88\u5931\u4E86
<span class="token class-name">PopupWindow</span> popwindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PopupWindow</span><span class="token punctuation">(</span>contentView <span class="token punctuation">,</span><span class="token class-name">LayoutParams</span><span class="token punctuation">.</span>WRAP_CONTENT<span class="token punctuation">,</span> <span class="token class-name">LayoutParams</span><span class="token punctuation">.</span>WRAP_CONTENT<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
popwindow<span class="token punctuation">.</span><span class="token function">setBackgroundDrawable</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ColorDrawable</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>TRANSPARENT<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> location <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//\u5F97\u5230\u5F53\u524D\u7EC4\u4EF6\u7684\u4F4D\u7F6E</span>
view<span class="token punctuation">.</span><span class="token function">getLocationInWindow</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//\u663E\u793ApopupWindow</span>
popwindow<span class="token punctuation">.</span><span class="token function">showAtLocation</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span><span class="token class-name">Gravity</span><span class="token punctuation">.</span>LEFT <span class="token operator">|</span> <span class="token class-name">Gravity</span><span class="token punctuation">.</span>TOP<span class="token punctuation">,</span> <span class="token class-name">DensityUtil</span><span class="token punctuation">.</span><span class="token function">dip2px</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> location<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">,</span>location<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u53D6\u6D88</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>popwindow <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> popwindow<span class="token punctuation">.</span><span class="token function">isShowing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   popwindow<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   popwindow <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u7EC6\u8282 <code>PopupWindow</code>\u662F\u5B58\u5728\u5230<code>Activity</code>\u4E0A\u7684\uFF0C\u5982\u679C<code>PopupWindow</code>\u5728\u663E\u793A\u7684\u65F6\u5019\u6309\u9000\u51FA\u952E\u7684\u65F6\u5019\u8BE5<code>Activity</code>\u5DF2\u7ECF\u9500\u6BC1\uFF0C\u4F46\u662F<code>PopupWindow</code>\u6CA1\u6709\u9500\u6BC1\uFF0C \u6240\u4EE5\u5C31\u62A5\u9519\u4E86(<code>Logcat</code>\u6709\u62A5\u9519\u4FE1\u606F\u4F46\u662F\u7A0B\u5E8F\u4E0D\u4F1A\u5D29\u6E83)\uFF0C\u6240\u4EE5\u6211\u4EEC\u5728<code>Activity</code>\u7684<code>onDestroy</code>\u65B9\u6CD5\u4E2D\u8981\u5224\u65AD\u4E00\u4E0B<code>PopupWindow</code>\u662F\u5426\u5728\u663E\u793A\uFF0C\u5982\u679C\u5728\u663E\u793A\u5C31\u53D6\u6D88\u663E\u793A\u3002<br><code>PopupWindow</code>\u9ED8\u8BA4\u662F\u6CA1\u6709\u80CC\u666F\u7684\uFF0C\u5982\u679C\u60F3\u8BA9\u5B83\u64AD\u653E\u52A8\u753B\u5C31\u6CA1\u6709\u6548\u679C\u4E86\uFF0C\u56E0\u4E3A\u6CA1\u6709\u80CC\u666F\u5C31\u4EC0\u4E48\u4E5F\u64AD\u653E\u4E0D\u4E86\uFF0C\u6240\u4EE5\u6211\u4EEC\u5728\u7528\u8FD9\u4E2A<code>PopupWindow</code>\u7684\u65F6\u5019\u5FC5\u987B\u8981\u7ED9\u5B83\u8BBE\u7F6E\u4E00\u4E2A\u80CC\u666F\uFF0C \u901A\u5E38\u53EF\u4EE5\u7ED9\u5B83\u8BBE\u7F6E\u4E3A\u900F\u660E\u8272,\u8FD9\u6837\u518D\u64AD\u653E\u52A8\u753B\u5C31\u6709\u6548\u679C\u4E86 <code>popwindow.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));</code></p></li></ol><h2 id="\u8BA9popupwindow\u54CD\u5E94back\u952E\u540E\u5173\u95ED\u3002" tabindex="-1"><a class="header-anchor" href="#\u8BA9popupwindow\u54CD\u5E94back\u952E\u540E\u5173\u95ED\u3002" aria-hidden="true">#</a> \u8BA9<code>PopupWindow</code>\u54CD\u5E94<code>Back</code>\u952E\u540E\u5173\u95ED\u3002</h2><ul><li><p>\u6700\u7B80\u5355<br> \u5728<code>new</code>\u7684\u65F6\u5019\uFF0C\u4F7F\u7528\u4E0B\u9762\u7684\u65B9\u6CD5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">new</span> <span class="token class-name">PopupWindow</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> <span class="token class-name">LayoutParams</span><span class="token punctuation">.</span>WRAP_CONTENT<span class="token punctuation">,</span> <span class="token class-name">LayoutParams</span><span class="token punctuation">.</span>WRAP_CONTENT<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5F53\u7136\u4F60\u4E5F\u53EF\u4EE5\u624B\u52A8\u8BBE\u7F6E\u5B83\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>mPopupWindow<span class="token punctuation">.</span><span class="token function">setFocusable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mPopupWindow<span class="token punctuation">.</span><span class="token function">setFocusableInTouchMode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B64\u65F6\u5B9E\u9645\u4E0A\u8FD8\u662F\u4E0D\u80FD\u8D77\u4F5C\u7528\u7684\uFF0C\u5FC5\u987B\u52A0\u5165\u4E0B\u9762\u8FD9\u884C\u4F5C\u7528\u672A\u77E5\u7684\u8BED\u53E5\u624D\u80FD\u53D1\u6325\u4F5C\u7528\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>mPopupWindow<span class="token punctuation">.</span><span class="token function">setBackgroundDrawable</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BitmapDrawable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8BBE\u7F6E <code>BackgroundDrawable</code>\u5E76\u4E0D\u4F1A\u6539\u53D8\u4F60\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u8BBE\u7F6E\u7684\u80CC\u666F\u989C\u8272\u6216\u56FE\u50CF\u3002</p></li><li><p>\u6700\u901A\u7528<br> \u9996\u5148\u5728\u5E03\u5C40\u6587\u4EF6<code>(*.xml)</code>\u4E2D\u968F\u610F\u9009\u53D6\u4E00\u4E2A\u4E0D\u5F71\u54CD\u4EFB\u4F55\u64CD\u4F5C\u7684<code>View</code>\uFF0C\u63A8\u8350\u4F7F\u7528\u6700\u5916\u5C42\u7684<code>Layout</code>\u3002<br> \u7136\u540E\u8BBE\u7F6E\u8BE5<code>Layout</code>\u7684<code>Focusable</code>\u548C<code>FocusableInTouchMode</code>\u90FD\u4E3A<code>true</code>\u3002 <br> \u63A5\u7740\u56DE\u5230\u4EE3\u7801\u4E2D\u5BF9\u8BE5<code>View</code>\u91CD\u5199<code>OnKeyListener()</code>\u4E8B\u4EF6\u4E86\u3002\u6355\u83B7<code>KEYCODE_BACK</code>\u7ED9\u5BF9\u8BDD\u6846<code>dismiss()</code>\u3002</p><p>\u7ED9\u51FA\u4E00\u6BB5\u793A\u4F8B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">PopupWindow</span> mPopupWindow<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">View</span> view<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">LinearLayout</span> layMenu<span class="token punctuation">;</span>
 
<span class="token class-name">LayoutInflater</span> inflater <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">LayoutInflater</span><span class="token punctuation">)</span> main<span class="token punctuation">.</span><span class="token function">getSystemService</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>LAYOUT_INFLATER_SERVICE<span class="token punctuation">)</span><span class="token punctuation">;</span>
view <span class="token operator">=</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>popup_main_menu<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
layMenu <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">LinearLayout</span><span class="token punctuation">)</span> view<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>layMenu<span class="token punctuation">)</span><span class="token punctuation">;</span>
mPopupWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PopupWindow</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> <span class="token class-name">LayoutParams</span><span class="token punctuation">.</span>WRAP_CONTENT<span class="token punctuation">,</span> <span class="token class-name">LayoutParams</span><span class="token punctuation">.</span>WRAP_CONTENT<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
layMenu<span class="token punctuation">.</span><span class="token function">setOnKeyListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OnKeyListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onKey</span><span class="token punctuation">(</span><span class="token class-name">View</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> keyCode<span class="token punctuation">,</span> <span class="token class-name">KeyEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span>ACTION_DOWN <span class="token operator">&amp;&amp;</span> keyCode <span class="token operator">==</span> <span class="token class-name">KeyEvent</span><span class="token punctuation">.</span>KEYCODE_BACK<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mPopupWindow<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
 
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><ul><li>\u90AE\u7BB1 \uFF1Acharon.chui@gmail.com</li><li>Good Luck!</li></ul>`,8),e=[t];function c(l,u){return a(),s("div",null,e)}var k=n(o,[["render",c],["__file","PopupWindow\u7EC6\u8282.html.vue"]]);export{k as default};
