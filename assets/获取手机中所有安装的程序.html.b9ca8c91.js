import{_ as n,o as s,c as a,e as t}from"./app.e2a3b496.js";const p={},o=t(`<h1 id="\u83B7\u53D6\u624B\u673A\u4E2D\u6240\u6709\u5B89\u88C5\u7684\u7A0B\u5E8F" tabindex="-1"><a class="header-anchor" href="#\u83B7\u53D6\u624B\u673A\u4E2D\u6240\u6709\u5B89\u88C5\u7684\u7A0B\u5E8F" aria-hidden="true">#</a> \u83B7\u53D6\u624B\u673A\u4E2D\u6240\u6709\u5B89\u88C5\u7684\u7A0B\u5E8F</h1><ul><li><code>PackageManger</code><br> \u5305\u7BA1\u7406\u8005\u5C01\u88C5\u4E86\u5F53\u524D\u5E94\u7528\u7A0B\u5E8F\u7684\u6240\u6709\u4FE1\u606F\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5305\u7BA1\u7406\u8005\u62FF\u5230\u5F53\u524D\u5E94\u7528\u7A0B\u5E8F\u7684\u6240\u6709\u4FE1\u606F\u3002</li><li><code>PackageInfo</code><br> \u8BE5\u7C7B\u5C01\u88C5\u4E86\u5E94\u7528\u7A0B\u5E8F\u6E05\u5355\u6587\u4EF6\u4E2D\u7684\u6240\u6709\u4FE1\u606F\u3002\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E2A\u7C7B\u62FF\u5230\u5F53\u524D\u5E94\u7528\u7A0B\u5E8F\u7684\u7248\u672C</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u8FD4\u56DE\u5E94\u7528\u7A0B\u5E8F\u7684\u4FE1\u606F
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AppInfo</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAppinfos</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token class-name">PackageManager</span> pm <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getPackageManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//\u5982\u679C\u540E\u9762\u60F3\u901A\u8FC7PackageInfo\u62FF\u5230\u6BCF\u4E2A\u7A0B\u5E8F\u7684\u6743\u9650\u4FE1\u606F\uFF0C\u90A3\u4E48\u8FD9\u91CCgetInstalledPackages\u7684\u53C2\u6570\u5C31\u5FC5\u987B\u662F</span>
	<span class="token comment">//PackageManager.GET_PERMISSIONS,\u4E0D\u7136\u540E\u9762\u901A\u8FC7PackageInfo\u5C31\u65E0\u6CD5\u5F97\u5230\u5E94\u7528\u7A0B\u5E8F\u6E05\u5355\u4E2D\u7533\u8BF7\u7684\u6743\u9650</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PackageInfo</span><span class="token punctuation">&gt;</span></span>  packinfos <span class="token operator">=</span> pm<span class="token punctuation">.</span><span class="token function">getInstalledPackages</span><span class="token punctuation">(</span><span class="token class-name">PackageManager</span><span class="token punctuation">.</span>GET_PERMISSIONS <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AppInfo</span><span class="token punctuation">&gt;</span></span> appinfos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AppInfo</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">PackageInfo</span> info <span class="token operator">:</span> packinfos<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token class-name">AppInfo</span> appInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AppInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		appInfo<span class="token punctuation">.</span><span class="token function">setPackname</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>packageName<span class="token punctuation">)</span><span class="token punctuation">;</span>
		appInfo<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>versionName<span class="token punctuation">)</span><span class="token punctuation">;</span>
		appInfo<span class="token punctuation">.</span><span class="token function">setAppName</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>applicationInfo<span class="token punctuation">.</span><span class="token function">loadLabel</span><span class="token punctuation">(</span>pm<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		appInfo<span class="token punctuation">.</span><span class="token function">setAppIcon</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>applicationInfo<span class="token punctuation">.</span><span class="token function">loadIcon</span><span class="token punctuation">(</span>pm<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>applicationInfo<span class="token punctuation">.</span>flags <span class="token operator">&amp;</span> <span class="token class-name">ApplicationInfo</span><span class="token punctuation">.</span>FLAG_EXTERNAL_STORAGE<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//\u901A\u8FC7\u8FD9\u4E2A\u6765\u5224\u65AD\u5B89\u88C5\u5230\u4E86\u624B\u673A\u8FD8\u662FSD\u5361</span>
			appInfo<span class="token punctuation">.</span><span class="token function">setInRom</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			appInfo<span class="token punctuation">.</span><span class="token function">setInRom</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//\u5224\u65AD\u7A0B\u5E8F\u662F\u4E0D\u662F\u7CFB\u7EDF\u7A0B\u5E8F</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">filterApp</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>applicationInfo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			appInfo<span class="token punctuation">.</span><span class="token function">setUserApp</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			appInfo<span class="token punctuation">.</span><span class="token function">setUserApp</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//\u83B7\u53D6\u5230\u67D0\u4E2A\u5E94\u7528\u7A0B\u5E8F\u7684\u5168\u90E8\u6743\u9650\u4FE1\u606F.</span>
		<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> permissions <span class="token operator">=</span> info<span class="token punctuation">.</span>requestedPermissions<span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>permissions<span class="token operator">!=</span><span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> permissions<span class="token punctuation">.</span>length<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">String</span> p<span class="token operator">:</span> permissions<span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;android.permission.INTERNET&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					appInfo<span class="token punctuation">.</span><span class="token function">setUseNetwork</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;android.permission.ACCESS_FINE_LOCATION&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					appInfo<span class="token punctuation">.</span><span class="token function">setUseGPS</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;android.permission.READ_CONTACTS&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					appInfo<span class="token punctuation">.</span><span class="token function">setUseContact</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		appinfos<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>appInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
		appInfo <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> appinfos<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u8BE5\u65B9\u6CD5\u63D0\u4F9B\u4E86\u7528\u4E8E\u5224\u65AD\u4E00\u4E2A\u7A0B\u5E8F\u662F\u7CFB\u7EDF\u7A0B\u5E8F\u8FD8\u662F\u7528\u6237\u7A0B\u5E8F\u7684\u529F\u80FD\u3002
 * <span class="token keyword">@param</span> <span class="token parameter">info</span>
 * <span class="token keyword">@return</span> true \u7528\u6237\u81EA\u5DF1\u5B89\u88C5\u7684\u8F6F\u4EF6
 *         fasle  \u7CFB\u7EDF\u8F6F\u4EF6.
 */</span>
<span class="token keyword">public</span>  <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">filterApp</span><span class="token punctuation">(</span><span class="token class-name">ApplicationInfo</span> info<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>flags <span class="token operator">&amp;</span> <span class="token class-name">ApplicationInfo</span><span class="token punctuation">.</span>FLAG_UPDATED_SYSTEM_APP<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>flags <span class="token operator">&amp;</span> <span class="token class-name">ApplicationInfo</span><span class="token punctuation">.</span>FLAG_SYSTEM<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><ul><li>\u90AE\u7BB1 \uFF1Acharon.chui@gmail.com</li><li>Good Luck!</li></ul>`,6),e=[o];function c(l,i){return s(),a("div",null,e)}var k=n(p,[["render",c],["__file","\u83B7\u53D6\u624B\u673A\u4E2D\u6240\u6709\u5B89\u88C5\u7684\u7A0B\u5E8F.html.vue"]]);export{k as default};
